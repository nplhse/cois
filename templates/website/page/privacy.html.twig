{% extends 'website/page/_page_layout.html.twig' %}

{% import '_elements/macro/breadcrumb.html.twig' as breadcrumbs %}

{% block title %}
    {{ page.title }} - {{ parent() }}
{% endblock %}

{% block content %}
    {% if is_granted('edit', page) %}
        {% set url =
            ea_url().setController(
                'App\\Controller\\Admin\\PageCrudController'
            ).setAction(
                'edit'
            ).setEntityId(
                page.id
            )
        %}
        <div class="float-end">
            <a class="btn btn-outline-primary" href="{{ url }}">
                <i class="bi bi-pencil-fill"></i>
            </a>
        </div>
    {% endif %}
    <h1>
        {{ page.title }}
    </h1>

    {{ page.content|raw }}
{% endblock %}

{% block aside_bottom %}
    <div class="card">
        <div class="card-header">
            {{ 'Cookie Consent'|trans }}
        </div>
        <div class="card-body">
            <p>
                {{
                    'This website is using cookies, you have to accept necessary cookies to proceed.'|trans
                }}
                {{ 'You will find more information on this page.'|trans }}
            </p>

            {{ form_start(consentForm) }}

            <strong>{{ 'Options'|trans }}:</strong>
            {{ form_widget(consentForm.categories) }}

            {{
                form_widget(
                    consentForm.target,
                    {
                        value: app.request.pathInfo
                    }
                )
            }}

            <div class="mt-2 pt-2">
                {{ form_widget(consentForm.submit) }}
            </div>

            {{ form_end(consentForm) }}
        </div>
    </div>
{% endblock %}
